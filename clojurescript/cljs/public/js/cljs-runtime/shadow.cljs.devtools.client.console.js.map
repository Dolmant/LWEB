{"version":3,"file":"shadow.cljs.devtools.client.console.js","sources":["shadow/cljs/devtools/client/console.cljs"],"mappings":"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","names":["cljs.core/Atom","obj","this__4742__auto__","writer__4743__auto__","opt__4744__auto__","cljs.core/-write","shadow.cljs.devtools.client.console/MapFormatter","shadow.cljs.devtools.client.console/->MapFormatter","cljs.core/PersistentArrayMap","iter__4902__auto__","s__3765","cljs.core/LazySeq","temp__5457__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4900__auto__","size__4901__auto__","cljs.core/count","b__3767","cljs.core/chunk-buffer","i__3766","cljs.core._nth.cljs$core$IFn$_invoke$arity$2","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__3764","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","value","s","shadow.cljs.devtools.client.console/clj->jsonml","shadow.cljs.devtools.client.console/keyword-style","cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic","shadow.cljs.devtools.client.console/install-all!","cljs.core/deref","shadow.cljs.devtools.client.console/object-ref","v","arr","item","cljs.core/boolean","cljs.core.get.cljs$core$IFn$_invoke$arity$2","m","key","shadow.cljs.devtools.client.console/remove-all!","cljs.core/type","this","cljs.core/PersistentHashMap","G__3830","shadow.cljs.devtools.client.console/SeqFormatter","cljs.core/sequential?","cljs.core/set?","k","struct","cljs.core/vector?","or__4453__auto__","js/goog.global.devtoolsFormatters","shadow.cljs.devtools.client.console/DerefFormatter","vec__3729","seq__3730","first__3731","cljs.core/next","tag","attrs","children","shadow.cljs.devtools.client.console/SymbolFormatter","shadow.cljs.devtools.client.console/->DerefFormatter","js","cljs.core/name","shadow.cljs.devtools.client.console/map->style","cljs.core/Symbol","all","cljs.core/chunk-first","s__3799","f","cljs.core/Volatile","cljs.core/seq?","shadow.cljs.devtools.client.console/KeywordFormatter","shadow.cljs.devtools.client.console/->KeywordFormatter","it","cljs.core/array?","shadow.cljs.devtools.client.console/->SeqFormatter","seq__3732","chunk__3733","count__3734","i__3735","c__4947__auto__","child","p1__3831#","cljs.core.remove.cljs$core$IFn$_invoke$arity$2","js/goog.object.get","js/goog.object.set","js/goog.global","cljs.core.map.cljs$core$IFn$_invoke$arity$2","p__3725","vec__3726","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","shadow.cljs.devtools.client.console/push-all","e3806","cljs.core/Keyword","cljs.core.array_seq.cljs$core$IFn$_invoke$arity$1","seq__3709","chunk__3710","count__3711","i__3712","cljs.core.sort.cljs$core$IFn$_invoke$arity$1","cljs.core.into.cljs$core$IFn$_invoke$arity$3","cljs.core.map.cljs$core$IFn$_invoke$arity$1","b__3801","i__3800","iter__3798","cljs.core/keys","clojure.string.join.cljs$core$IFn$_invoke$arity$2","shadow.cljs.devtools.client.console/->SymbolFormatter","cljs.core.into_array.cljs$core$IFn$_invoke$arity$1","cljs.core/record?","e"],"sourcesContent":["(ns shadow.cljs.devtools.client.console\n  (:require [clojure.string :as str]))\n\n(defn- push-all [^js arr item]\n  (if (vector? item)\n    (doseq [it item]\n      (.push arr it))\n    (.push arr item)\n    ))\n\n(defn object-ref [obj]\n  (when obj\n    #js [\"object\" #js {:object obj}]))\n\n(defn map->style [m]\n  #js {:style\n       (->> m\n            (map (fn [[k v]] (str (name k) \": \" v \";\")))\n            (str/join \"\")\n            )})\n\n(defn clj->jsonml\n  [struct]\n\n  (cond\n    (nil? struct)\n    nil\n\n    (array? struct)\n    struct\n\n    (vector? struct)\n    (let [[tag attrs & children] struct\n          js #js [(name tag) (map->style attrs)]]\n      (doseq [child children]\n        (push-all js (clj->jsonml child)))\n      js)\n\n    (string? struct)\n    struct\n\n    (number? struct)\n    struct\n\n    (seq? struct)\n    (into [] (map clj->jsonml) struct)\n\n    :else\n    (object-ref struct)\n    ))\n\n(deftype SeqFormatter []\n  Object\n  (shadow$formatter [this] true)\n  (header [this obj]\n    (when (or (sequential? obj) (set? obj))\n      (clj->jsonml [:span {} (str (pr-str (type obj)) \" [count: \" (count obj) \"]\")])\n      ))\n  (hasBody [this obj]\n    (boolean (seq obj)))\n  (body [this s]\n    (clj->jsonml [:ol {:margin 0}\n                  (for [value s]\n                    [:li {} (object-ref value)])])))\n\n(deftype MapFormatter []\n  Object\n  (shadow$formatter [this] true)\n  (header [this obj]\n    (when (or (instance? cljs.core/PersistentHashMap obj)\n              (instance? cljs.core/PersistentArrayMap obj)\n              (record? obj))\n      (clj->jsonml [:span {} (str (pr-str (type obj)) \" [count: \" (count obj) \"]\")])\n      ))\n\n  (hasBody [this obj]\n    (boolean (seq obj)))\n\n  (body [this m]\n    (clj->jsonml\n      [:table {:width \"100%\" :margin-left \"14px\"}\n       (for [key (let [k (keys m)]\n                   (try\n                     (sort k)\n                     (catch :default e\n                       k)))\n             :let [value (get m key)]]\n         [:tr {:vertical-align \"top\"}\n          [:td {} (object-ref key)]\n          [:td {} (object-ref value)]])])))\n\n(def keyword-style {:color \"rgb(136, 19, 145)\"})\n\n(deftype KeywordFormatter []\n  Object\n  (shadow$formatter [this] true)\n  (header [this obj]\n    (when (keyword? obj)\n      (clj->jsonml [:span keyword-style (pr-str obj)])\n      ))\n  (hasBody [this obj]\n    false)\n  (body [this m]\n    nil))\n\n(deftype SymbolFormatter []\n  Object\n  (shadow$formatter [this] true)\n  (header [this obj]\n    (when (symbol? obj)\n      (clj->jsonml [:span keyword-style (pr-str obj)])\n      ))\n  (hasBody [this obj]\n    false)\n  (body [this m]\n    nil))\n\n(deftype DerefFormatter []\n  Object\n  (shadow$formatter [this] true)\n  (header [this obj]\n    (when (or (instance? Atom obj)\n              (instance? Volatile obj))\n      (clj->jsonml [:span keyword-style (str \"@DEREF \" (pr-str (type obj)))])\n      ))\n  (hasBody [this obj]\n    true)\n  (body [this v]\n    (clj->jsonml [:div {:margin-left \"14px\"} (object-ref @v)])))\n\n(defn install-all! []\n  (when-let [^js f js/goog.global.devtoolsFormatters]\n    (doto f\n      (.push (KeywordFormatter.))\n      (.push (MapFormatter.))\n      (.push (SeqFormatter.))\n      (.push (SymbolFormatter.))\n      (.push (DerefFormatter.)))\n\n    #_(js/console.log [1 \"2\" :3 'test {\"hello\" :world} '()])\n    ))\n\n(defn remove-all! []\n  (let [all\n        (->> (or js/goog.global.devtoolsFormatters #js [])\n             (array-seq)\n             (remove #(js/goog.object.get % \"shadow$formatter\"))\n             (into-array))]\n    (js/goog.object.set js/goog.global \"devtoolsFormatters\" all)))\n\n;; in case this is live-reloaded, clean up first\n;; has the side effect of creating window.devtoolsFormatters\n;; do not want to look at the user agent as settings this\n;; doesn't hurt any browser, only chrome with 47+ will use it\n(remove-all!)\n(install-all!)"]}